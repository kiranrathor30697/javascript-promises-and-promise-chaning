<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>API Part 3</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    </head>
    <body>
        <!-- Modal -->
        <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="staticBackdropLabel">Modal title</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <ul class="list-group">
                        <li class="list-group-item">A</li>
                        <li class="list-group-item">B</li>
                        <li class="list-group-item">C</li>
                        <li class="list-group-item">D</li>
                        <li class="list-group-item">E</li>
                      </ul>
                </div>
                <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Understood</button>
                </div>
            </div>
            </div>
        </div>
        <button class="btn btn-success">Get Some Data</button>
        
        <div class="d-flex justify-content-center k_spiner">
            <div class="spinner-border" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
  

        <table class="table">
            <thead>
              <tr>
                <th scope="col" style="text-align: center;">Id</th>
                <th scope="col" style="text-align: center;">Title</th>
                <th scope="col" style="text-align: center;">Price</th>
                <th scope="col" style="text-align: center;">Image</th>
                <th scope="col" style="text-align: center;">Description</th>
                <th scope="col" style="text-align: center;">Category</th>
                <th scope="col" colspan="2" style="text-align: center;">Rating</th>
                <th scope="col" style="text-align: center;">Action</th>
              </tr>
            </thead>
            <tbody>
              
            </tbody>
          </table>
          
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>  
        <script>
            
            document.querySelector('button.btn.btn-success').addEventListener('click',function(){

               
                //alert('okok');

                //fetch().then().then().catch();
                fetch('https://fakestoreapi.com/products',{method:'GET'})
                .then((response)=>{
                    //console.log(response);
                    response.json().then((data)=>{

                        document.querySelector('.k_spiner').remove();

                        tr = '';
                        //console.log(data);
                        data.forEach((currentElement,index,arr) => {
                            //console.log(currentElement);

                            tr += `<tr>
                                        <td>`+currentElement.id+`</td>
                                        <td>`+currentElement.title+`</td>
                                        <td>`+currentElement.price+`</td>
                                        <td>`+currentElement.image+`</td>
                                        <td>`+currentElement.image+`</td>
                                        <td>`+currentElement.description+`</td>
                                        <td>`+currentElement.category+`</td>
                                        <td>
                                                `+currentElement.rating.count+`<br>
                                                `+currentElement.rating.rate+`
                                        </td>
                                        <td>
                                            <button class="btn btn-sm btn-success k_view_btn">View</button>
                                            <button class="btn btn-sm btn-primary k_edit_btn">Edit</button>
                                            <button class="btn btn-sm btn-danger k_delete_btn">Delete</button>
                                        </td>
                                            
                                    </tr>`                   
                        });
                        //console.log(tr);
                        document.querySelector('table > tbody').innerHTML = tr;
                    });
                })
                
                .catch(function(error){
                    console.log(error);
                });

            });

            document.addEventListener('click',function(e){
                //alert('OKOKO');
                //console.log(e);
                //console.log(e.target.classList[3]);
                view_btn = e.target.classList[3];
                console.log(view_btn);
                //console.log(e.target.closest('tr'));
                

            });
        </script>
    </body>
</html>